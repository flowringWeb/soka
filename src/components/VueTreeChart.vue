<script>
    export default {
        data() {
            return {
                richMediaData: {
                    depart: "桃園東區女子部長",
                    name: 800,
                    children: [
                        {
                            depart: "勝利支部",
                            name: "吳曉雯",
                            age: 33,
                            sub: "副本部長",
                            group: [
                                {
                                    name: "王xx",
                                    age: 12,
                                },
                                {
                                    name: "王oo",
                                    age: 55,
                                }
                            ],
                            children: [
                                    {
                                        depart: "A地區",
                                        name: 100,
                                        sub: "副本部長",
                                        group: [
                                            {
                                                name: "王xx",
                                                age: 12,
                                            },
                                            {
                                                name: "王oo",
                                                age: 55,
                                            }
                                        ],
                                        children: [
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    },
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                        ]
                                    },
                                    {
                                        depart: "B地區",
                                        name: 300,
                                        sub: "副本部長",
                                        group: [
                                            {
                                                name: "王xx",
                                                age: 12,
                                            },
                                            {
                                                name: "王oo",
                                                age: 55,
                                            }
                                        ],
                                        children: [
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    },
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                        ]
                                    },
                                ],
                        },
                        {
                            depart: "榮光支部",
                            name: 200,
                            sub: "副本部長",
                                group: [
                                    {
                                        name: "王xx",
                                        age: 12,
                                    },
                                    {
                                        name: "王oo",
                                        age: 55,
                                    },
                                    {
                                        name: "王xx",
                                        age: 12,
                                    },
                                    {
                                        name: "王oo",
                                        age: 55,
                                    },
                                    {
                                        name: "王xx",
                                        age: 12,
                                    },
                                    {
                                        name: "王oo",
                                        age: 55,
                                    }
                                ],
                                children: [
                                    {
                                        depart: "C地區",
                                        name: 230,
                                        sub: "副本部長",
                                        group: [
                                            {
                                                name: "王xx",
                                                age: 12,
                                            },
                                            {
                                                name: "王oo",
                                                age: 55,
                                            }
                                        ],
                                        children: [
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    },
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                        ]
                                    },
                                    {
                                        depart: "D地區",
                                        name: 230,
                                        sub: "副本部長",
                                        group: [
                                            {
                                                name: "王xx",
                                                age: 12,
                                            },
                                            {
                                                name: "王oo",
                                                age: 55,
                                            }
                                        ],
                                        children: [
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            }
                                        ]
                                    },
                                ],
                        },
                        {
                            depart: "和平支部",
                            name: 300,
                            sub: "副本部長",
                            group: [
                                    {
                                        name: "王xx",
                                        age: 12,
                                    },
                                    {
                                        name: "王oo",
                                        age: 55,
                                    },
                                    {
                                        name: "王xx",
                                        age: 12,
                                    },
                                    {
                                        name: "王oo",
                                        age: 55,
                                    },
                                ],
                            children: [
                                {
                                    depart: "E地區",
                                    name: 230,
                                    sub: "副本部長",
                                    group: [
                                        {
                                            name: "王xx",
                                            age: 12,
                                        },
                                        {
                                            name: "王oo",
                                            age: 55,
                                        }
                                    ],
                                    children: [
                                        {
                                            depart:"女子部長",
                                            name: "周xx",
                                            district: "忠勇地區",
                                            sub: "副本部長",
                                            group: [
                                                {
                                                    name: "王xx",
                                                    age: 12,
                                                },
                                                {
                                                    name: "王oo",
                                                    age: 55,
                                                }
                                            ],
                                        },
                                        {
                                            depart:"女子部長",
                                            name: "周xx",
                                            district: "忠勇地區",
                                            sub: "副本部長",
                                            group: [
                                                {
                                                    name: "王xx",
                                                    age: 12,
                                                },
                                                {
                                                    name: "王oo",
                                                    age: 55,
                                                }
                                            ],
                                        }
                                    ]
                                },
                                {
                                    depart: "F地區",
                                    name: 230,
                                    sub: "副本部長",
                                    group: [
                                        {
                                            name: "王xx",
                                            age: 12,
                                        },
                                        {
                                            name: "王oo",
                                            age: 55,
                                        }
                                    ],
                                        children: [
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    },
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                            {
                                                depart:"女子部長",
                                                name: "周xx",
                                                district: "忠勇地區",
                                                sub: "副本部長",
                                                group: [
                                                    {
                                                        name: "王xx",
                                                        age: 12,
                                                    },
                                                    {
                                                        name: "王oo",
                                                        age: 55,
                                                    }
                                                ],
                                            },
                                        ]
                                },
                            ],
                        },
                    ],
                },
                treeConfig: { 
                    nodeWidth: 180, 
                    nodeHeight: 110, 
                    levelHeight: 150 
                },
            }
        },
        methods: {
            zoomIn() {
                this.$refs.vueTreeChart.zoomIn();
            },
            zoomOut() {
                this.$refs.vueTreeChart.zoomOut();
            },
            trigger(node) {
                // console.log(node.children);
                var article = document.querySelector('.article');
                if(node.children) {
                    var str = '';
                    node.children.forEach((item)=> {
                        var context = 
                        `
                            <li>${item.depart}</li>
                        `
                        str += context;
                    })
                    // console.log(str);
                    article.innerHTML = str;
                } else {
                    str = '沒有子節點';
                    article.innerHTML = str;
                }

            },
        }
    }
</script>
<template>
    <div>
        <button type="button" @click="zoomIn">縮放 +</button>
        <button type="button" @click="zoomOut">縮放 -</button>
        <div class="article"></div>
        <vue-tree
            class="treeWrapper"
            :dataset="richMediaData"
            :config="treeConfig"
            :collapse-enabled="false"
            ref="vueTreeChart"
        >
            <template v-slot:node="{ node, collapsed }">
                <div
                    class="rich-media-node"
                    :style="{ border: collapsed ? '2px solid grey' : '' }"
                    @click="trigger(node)"
                >
                    <div>
                        <div v-if="node.district" style="font-weight: bold">{{ node.district }}</div>
                        <span style="font-weight: bold">{{ node.depart }}</span><br> <span>{{node.name}} {{node.age}}</span>
                        <br><br>
                        <span style="font-weight: bold">{{ node.sub }}</span><br>
                        <ul>
                            <li v-for="(item, index) in node.group" :key="index">
                                {{ item.name }} {{ item.age }}
                            </li>
                        </ul>
                    </div>
                </div>
            </template>
        </vue-tree>
    </div>
</template>
<style lang="scss" scoped>
    .container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .treeWrapper {
        width: 100vw;
        height: 130vh !important;
    }
    .rich-media-node {
        width: 150px;
        padding: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #000;
        background-color: #FFF;
        border: 1px solid #000;
        border-radius: 4px;
        text-align: center;
    }
</style>